<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Café — Menu</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Reset & Base */
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=1600&q=80') 
              no-repeat center center fixed;
  background-size: cover;
  color: #2d3436;
  line-height: 1.6;
}

/* Overlay for readability */
body::before {
  content: "";
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.45);
  z-index: -1;
}

/* Navigation */
nav {
  position: fixed; top:0; left:0; right:0;
  height: 65px; 
  background: rgba(20,20,20,0.7);
  backdrop-filter: blur(10px);
  color: #fff;
  display: flex; justify-content: space-between; align-items: center;
  padding: 0 25px;
  z-index: 10;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
nav .logo {
  font-weight: 700; font-size: 22px;
  letter-spacing: 1px; color: #f1c40f;
}
nav .menu a {
  color: #fff; margin-left: 25px;
  text-decoration: none; font-weight: 500;
  transition: 0.3s;
}
nav .menu a:hover { color: #f1c40f; }

/* Sections */
section {
  padding: 100px 20px 50px;
  max-width: 1200px; margin: auto;
}
h3 {
  margin-bottom: 20px; 
  font-size: 32px; 
  font-weight: 700; 
  color: #fff; 
  text-align: center;
}

/* Menu Grid */
.grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); 
  gap: 25px; 
}

/* Cards (Glass effect) */
.card {
  background: rgba(255,255,255,0.15);
  border-radius: 18px; padding: 25px;
  backdrop-filter: blur(15px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  text-align: center;
  transition: transform .3s, box-shadow .3s;
  color: #fff;
}
.card:hover { 
  transform: translateY(-8px); 
  box-shadow: 0 12px 25px rgba(0,0,0,0.4);
}
.card img {
  width: 90px; height: 90px; border-radius: 50%;
  object-fit: cover; margin-bottom: 12px;
  border: 3px solid rgba(255,255,255,0.7);
}
.card h4 { 
  margin: 10px 0; font-size: 20px; font-weight: 600; 
}
.card p {
  font-size: 14px; opacity: 0.85; 
}

/* Buttons */
.btn {
  padding: 8px 16px; border:none; 
  border-radius: 10px; cursor:pointer; 
  font-weight: 600; transition: 0.3s;
}
.btn.primary {
  background: linear-gradient(135deg, #f1c40f, #e67e22);
  color: #fff;
}
.btn.primary:hover { 
  background: linear-gradient(135deg, #e1b20d, #d35400); 
}
.btn.ghost {
  background: rgba(255,255,255,0.2); 
  color:#fff;
}
.btn.ghost:hover {
  background: rgba(255,255,255,0.35);
}

/* Cart Panel */
#cartPanel {
  margin-top:20px; padding:18px; 
  border-radius: 15px; 
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(12px);
  box-shadow:0 4px 12px rgba(0,0,0,0.25);
  color: #fff;
}
.row { 
  display:flex; justify-content:space-between; align-items:center; 
  margin: 8px 0; 
}
.muted { color: rgba(255,255,255,0.75); font-size:14px; }
.totbar { display:flex; justify-content:space-between; margin-top:12px; }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav>
    <div class="logo">☕ Smart Café</div>
    <div class="menu">
      <a href="#menu">Menu</a>
      <a href="#cart">Cart</a>
    </div>
  </nav>

  <!-- MENU -->
  <section id="menu">
    <h3>Our Menu <span class="muted">Premium Café</span></h3>
    <div id="menuGrid" class="grid"></div>
  </section>

  <!-- CART -->
  <section id="cart">
    <h3>Your Cart</h3>
    <button class="btn ghost" id="clearCart">Clear Cart</button>
    <div id="cartPanel">
      <div id="cartList"></div>
      <div class="totbar"><div class="muted">Total</div><div id="totalAmt" style="font-weight:700">₹0</div></div>
      <button id="placeOrderBtn" class="btn primary" style="width:100%; margin-top:10px">Place Order</button>
    </div>
  </section>

  <script>
    // ======= Data =======
    const MENU = [
      { name:"Cold Coffee", price:70, img:"https://www.cookwithmanali.com/wp-content/uploads/2022/04/Cold-Coffee.jpg" },
      { name:"Masala Tea",  price:30, img:"https://i0.wp.com/www.cookingfromheart.com/wp-content/uploads/2018/07/Masala-Chai-5.jpg" },
      { name:"Veg Sandwich",price:75, img:"https://enjoyinfourseason.com/wp-content/uploads/2022/05/Fourseason-VEG-SANDWICH.jpg" },
      { name:"Pasta Arrabiata", price:120, img:"https://centslessdeals.com/wp-content/uploads/2022/09/Skillet-Pasta-With-Ground-Beef-TheShortcutKitchen-9-1024x1536.jpg" },
      { name:"Aloo Paratha", price:60, img:"https://tse2.mm.bing.net/th/id/OIP.hhmfPUh87IrJ3gkW_2B52AHaHa" },
      { name:"Maggie Bowl", price:55, img:"https://tse4.mm.bing.net/th/id/OIP.0-gQrQaa-7TK5XdmkbK2SQHaEl" },
      { name:"Fruit Salad", price:50, img:"https://www.wellplated.com/wp-content/uploads/2021/05/Delicious-Fruit-Salad.jpg" },
      { name:"Chocolate Shake", price:90, img:"https://tse4.mm.bing.net/th/id/OIP.4VnEe88sF7Dy86vXQA-1fAHaLH" }
    ];

    // ======= Helpers =======
    const $ = id => document.getElementById(id);
    const getCart = () => JSON.parse(localStorage.getItem("cart")||"[]");
    const setCart = c => localStorage.setItem("cart",JSON.stringify(c));
    const getOrders = () => JSON.parse(localStorage.getItem("orders")||"[]");
    const setOrders = o => localStorage.setItem("orders",JSON.stringify(o));
    const getUser = () => JSON.parse(localStorage.getItem("currentUser")||"null");

    // ======= Render Menu =======
    function renderMenu(){
      $("menuGrid").innerHTML = "";
      MENU.forEach((m,i)=>{
        const el=document.createElement("div");
        el.className="card";
        el.innerHTML=`
          <img src="${m.img}" alt="${m.name}">
          <h4>${m.name}</h4>
          <p>₹${m.price}</p>
          <button class="btn primary" data-add="${i}">Add to Cart</button>
        `;
        $("menuGrid").appendChild(el);
      });
    }

    // ======= Render Cart =======
    function renderCart(){
      const list=$("cartList"); const CART=getCart(); list.innerHTML="";
      if(CART.length===0){ list.innerHTML='<div class="muted">Cart is empty.</div>'; $("totalAmt").textContent="₹0"; return; }
      const groups=Object.values(CART.reduce((acc,it)=>{ acc[it.name]??={...it,qty:0}; acc[it.name].qty++; return acc; },{}));
      groups.forEach(g=>{
        const row=document.createElement("div"); row.className="row";
        row.innerHTML=`<div>${g.name} x ${g.qty}</div><div>₹${g.price*g.qty}</div>`;
        list.appendChild(row);
      });
      const total=CART.reduce((s,x)=>s+x.price,0); $("totalAmt").textContent="₹"+total;
    }

    // ======= Events =======
    document.body.addEventListener("click",e=>{
      const add=e.target.closest("[data-add]");
      if(add){ let CART=getCart(); CART.push(MENU[+add.dataset.add]); setCart(CART); renderCart(); }
    });
    $("clearCart").addEventListener("click",()=>{ setCart([]); renderCart(); });

    $("placeOrderBtn").addEventListener("click",()=>{
      const user=getUser(); if(!user||user.role!=="student"){ alert("Please login as student."); return; }
      let CART=getCart(); if(CART.length===0){ alert("Cart is empty."); return; }

      const orders=getOrders();
      const token=Math.max(0,...orders.map(o=>o.token||0))+1;
      const newOrder={
        id: crypto.randomUUID?.()||String(Date.now()),
        token,
        items:CART.map(x=>x.name),
        total:CART.reduce((s,x)=>s+x.price,0),
        status:"Preparing",
        by:user.username,
        at:new Date().toLocaleTimeString(),
        eta: Math.floor(Math.random()*6)+5
      };
      orders.push(newOrder); setOrders(orders); setCart([]); renderCart();
      alert(`Order placed!\nToken #${String(token).padStart(3,'0')}\nETA: ${newOrder.eta} mins`);
    });

    // ======= Init =======
    renderMenu(); renderCart();
  </script>
</body>
</html>
